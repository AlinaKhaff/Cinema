{"version":3,"sources":["../js/feedback.js"],"names":["name1Field","document","querySelector","parentNode","email1Field","selectPlace","getElementById","reviewField","form","ERROR_CLASS_NAME","FOCUCED_CLASS_NAME","SELECT_SELECTED","initalizeField","field","input","getElementsByTagName","fieldError","reset","clearError","classList","remove","innerText","addEventListener","add","value","addError","errorText","getValue","focus","handleSubmit","event","name1Value","name1FieldUtils","email1Value","email1Fieldutils","reviewValue","reviewFieldutils","email1FieldUtils","reviewFieldUtils","preventDefault","data","name","email","prize","url","URL","search","URLSearchParams","toString","fetch","then","json"],"mappings":"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","sourcesContent":["const name1Field = document.querySelector('#block08-form   input[name=\"name1\"]').parentNode;\r\nconst email1Field = document.querySelector('#block08-form   input[name=\"email1\"]').parentNode;\r\nconst selectPlace = document.getElementById('place-numbers')\r\nconst reviewField = document.querySelector('#block08-form   input[name=\"review\"]').parentNode;\r\nconst form = document.getElementById('feedback-form');\r\n\r\nconst ERROR_CLASS_NAME = 'st-input1_error';\r\nconst FOCUCED_CLASS_NAME = 'st-input1_focused';\r\nconst SELECT_SELECTED = 'input-select-selected';\r\n\r\nfunction initalizeField(field) {\r\n    const input = field.getElementsByTagName('input')[0];\r\n    const fieldError = field.querySelector('.st-input1__error-msg');\r\n\r\n  reset();\r\n  \r\n\r\n    function clearError() {\r\n        field.classList.remove(FOCUCED_CLASS_NAME);\r\n        fieldError.innerText = '';\r\n    }\r\n\r\n\r\n    input.addEventListener('focus', function () {\r\n        field.classList.add(FOCUCED_CLASS_NAME);\r\n    })\r\n\r\n    input.addEventListener('blur', () => {\r\n        if (!input.value) {\r\n            field.classList.remove(FOCUCED_CLASS_NAME);\r\n        }\r\n    })\r\n    input.addEventListener('input', ()=> {\r\n        clearError();\r\n    })\r\n\r\n    function reset () {\r\n        input.value = '';\r\n        field.classList.remove(ERROR_CLASS_NAME);\r\n        clearError();\r\n    }\r\n\r\n    return {\r\n        addError(errorText) {\r\n            field.classList.add(ERROR_CLASS_NAME);\r\n            fieldError.innerText = errorText;\r\n        },\r\n        getValue() {\r\n            return input.value\r\n        },\r\n        focus() {\r\n            input.focus()\r\n        },\r\n        reset:reset\r\n\r\n    }\r\n}\r\n    initalizeField(name1Field);\r\n    initalizeField(email1Field);\r\n    initalizeField(reviewField);\r\n\r\n\r\n    selectPlace.addEventListener('change', () => {\r\n        selectPlace.classList.add('input-select-selected');\r\n    })\r\n\r\n\r\n    function handleSubmit(event) {\r\n        const name1Value = name1FieldUtils.getValue();\r\n        const email1Value = email1Fieldutils.getValue();\r\n        const reviewValue = reviewFieldutils.getValue();\r\n        \r\n\r\n\r\n        if (!name1Value) {\r\n            name1FieldUtils.addError('Необходимо указать имя');\r\n            return;\r\n\r\n        }\r\n        if (!email1Value) {\r\n            email1FieldUtils.addError('Необходимо указать email');\r\n            return;\r\n\r\n        }\r\n    \r\n        if (selectPlace.value === 'none') {\r\n            selectPlace.classList.add('ERROR_CLASS_NAME');\r\n            return;\r\n\r\n        }\r\n        if (!reviewValue) {\r\n            reviewFieldUtils.addError('Необходимо указать email');\r\n            return;\r\n\r\n        }\r\n        event.preventDefault();\r\n\r\n\r\n        const data = {\r\n            name: name1Value,\r\n            email: email1Value,\r\n            prize: selectPlace.value\r\n        };\r\n\r\n        const url = new URL('http://inno-ijl.ru/multystub/stc-21-03/feedback');\r\n        url.search = new URLSearchParams(data).toString();\r\n\r\n        fetch(url.toString())\r\n        .then(data=> data.json())\r\n        .then((data)=> {\r\n           \r\n            name1FieldUtils.reset();\r\n            email1FieldUtils.reset();\r\n            reviewFieldUtils.reset();\r\n\r\n        });\r\n\r\n    }\r\n\r\n    form.addEventListener('submit', handleSubmit);\r\n  "],"file":"feedback.js"}