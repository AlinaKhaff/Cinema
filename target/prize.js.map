{"version":3,"sources":["../js/prize.js"],"names":["openBtn","document","getElementById","popup","querySelector","closeBtn","nameField","parentNode","emailField","selectPrize","form","popupTooggle","classList","toggle","ERROR_CLASS_NAME","FOCUCED_CLASS_NAME","SELECT_SELECTED","initalizeField","field","input","getElementsByTagName","fieldError","reset","clearError","remove","innerText","addEventListener","add","value","addError","errorText","getValue","focus","nameFieldUtils","onclick","handleSubmit","event","nameValue","emailValue","emailFieldutils","emailFieldUtils","preventDefault","data","name","email","prize","url","URL","search","URLSearchParams","toString","fetch","then","json"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAhB;AACA,MAAMC,KAAK,GAAGF,QAAQ,CAACG,aAAT,CAAuB,cAAvB,CAAd;AACA,MAAMC,QAAQ,GAAGJ,QAAQ,CAACG,aAAT,CAAuB,qBAAvB,CAAjB;AACA,MAAME,SAAS,GAAGL,QAAQ,CAACG,aAAT,CAAuB,iCAAvB,EAA0DG,UAA5E;AACA,MAAMC,UAAU,GAAGP,QAAQ,CAACG,aAAT,CAAuB,kCAAvB,EAA2DG,UAA9E;AACA,MAAME,WAAW,GAAGR,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAApB;AACA,MAAMQ,IAAI,GAAGT,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAb;;AAGA,SAASS,YAAT,GAAwB;AACpBR,EAAAA,KAAK,CAACS,SAAN,CAAgBC,MAAhB,CAAuB,QAAvB;AACH;;AAED,MAAMC,gBAAgB,GAAG,iBAAzB;AACA,MAAMC,kBAAkB,GAAG,mBAA3B;AACA,MAAMC,eAAe,GAAG,uBAAxB;;AAEA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC3B,QAAMC,KAAK,GAAGD,KAAK,CAACE,oBAAN,CAA2B,OAA3B,EAAoC,CAApC,CAAd;AACA,QAAMC,UAAU,GAAGH,KAAK,CAACd,aAAN,CAAoB,uBAApB,CAAnB;AAEFkB,EAAAA,KAAK;;AAGH,WAASC,UAAT,GAAsB;AAClBL,IAAAA,KAAK,CAACN,SAAN,CAAgBY,MAAhB,CAAuBT,kBAAvB;AACAM,IAAAA,UAAU,CAACI,SAAX,GAAuB,EAAvB;AACH;;AAGDN,EAAAA,KAAK,CAACO,gBAAN,CAAuB,OAAvB,EAAgC,YAAY;AACxCR,IAAAA,KAAK,CAACN,SAAN,CAAgBe,GAAhB,CAAoBZ,kBAApB;AACH,GAFD;AAIAI,EAAAA,KAAK,CAACO,gBAAN,CAAuB,MAAvB,EAA+B,MAAM;AACjC,QAAI,CAACP,KAAK,CAACS,KAAX,EAAkB;AACdV,MAAAA,KAAK,CAACN,SAAN,CAAgBY,MAAhB,CAAuBT,kBAAvB;AACH;AACJ,GAJD;AAKAI,EAAAA,KAAK,CAACO,gBAAN,CAAuB,OAAvB,EAAgC,MAAK;AACjCH,IAAAA,UAAU;AACb,GAFD;;AAIA,WAASD,KAAT,GAAkB;AACdH,IAAAA,KAAK,CAACS,KAAN,GAAc,EAAd;AACAV,IAAAA,KAAK,CAACN,SAAN,CAAgBY,MAAhB,CAAuBV,gBAAvB;AACAS,IAAAA,UAAU;AACb;;AAED,SAAO;AACHM,IAAAA,QAAQ,CAACC,SAAD,EAAY;AAChBZ,MAAAA,KAAK,CAACN,SAAN,CAAgBe,GAAhB,CAAoBb,gBAApB;AACAO,MAAAA,UAAU,CAACI,SAAX,GAAuBK,SAAvB;AACH,KAJE;;AAKHC,IAAAA,QAAQ,GAAG;AACP,aAAOZ,KAAK,CAACS,KAAb;AACH,KAPE;;AAQHI,IAAAA,KAAK,GAAG;AACJb,MAAAA,KAAK,CAACa,KAAN;AACH,KAVE;;AAWHV,IAAAA,KAAK,EAACA;AAXH,GAAP;AAcH;;AAGGL,cAAc,CAACX,SAAD,CAAd;AACAW,cAAc,CAACT,UAAD,CAAd;AAEAR,OAAO,CAAC0B,gBAAR,CAAyB,OAAzB,EAAkC,MAAM;AACpCf,EAAAA,YAAY;AACZsB,EAAAA,cAAc,CAACD,KAAf;AACH,CAHD;AAIAvB,WAAW,CAACiB,gBAAZ,CAA6B,QAA7B,EAAuC,MAAM;AACzCjB,EAAAA,WAAW,CAACG,SAAZ,CAAsBe,GAAtB,CAA0B,uBAA1B;AACH,CAFD;AAGAtB,QAAQ,CAAC6B,OAAT,GAAmBvB,YAAnB;;AAEA,SAASwB,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,QAAMC,SAAS,GAAGJ,cAAc,CAACF,QAAf,EAAlB;AACA,QAAMO,UAAU,GAAGC,eAAe,CAACR,QAAhB,EAAnB;;AAGA,MAAI,CAACM,SAAL,EAAgB;AACZJ,IAAAA,cAAc,CAACJ,QAAf,CAAwB,wBAAxB;AACA;AAEH;;AACD,MAAI,CAACS,UAAL,EAAiB;AACbE,IAAAA,eAAe,CAACX,QAAhB,CAAyB,0BAAzB;AACA;AAEH;;AACD,MAAIpB,WAAW,CAACmB,KAAZ,KAAsB,MAA1B,EAAkC;AAC9BnB,IAAAA,WAAW,CAACG,SAAZ,CAAsBe,GAAtB,CAA0B,kBAA1B;AACA;AAEH;;AACDS,EAAAA,KAAK,CAACK,cAAN;AAGA,QAAMC,IAAI,GAAG;AACTC,IAAAA,IAAI,EAAEN,SADG;AAETO,IAAAA,KAAK,EAAEN,UAFE;AAGTO,IAAAA,KAAK,EAAEpC,WAAW,CAACmB;AAHV,GAAb;AAMA,QAAMkB,GAAG,GAAG,IAAIC,GAAJ,CAAQ,iDAAR,CAAZ;AACAD,EAAAA,GAAG,CAACE,MAAJ,GAAa,IAAIC,eAAJ,CAAoBP,IAApB,EAA0BQ,QAA1B,EAAb;AAEAC,EAAAA,KAAK,CAACL,GAAG,CAACI,QAAJ,EAAD,CAAL,CACCE,IADD,CACMV,IAAI,IAAGA,IAAI,CAACW,IAAL,EADb,EAECD,IAFD,CAEOV,IAAD,IAAS;AACX/B,IAAAA,YAAY;AACZsB,IAAAA,cAAc,CAACX,KAAf;AACAkB,IAAAA,eAAe,CAAClB,KAAhB;AACH,GAND;AAQH;;AAEDZ,IAAI,CAACgB,gBAAL,CAAsB,QAAtB,EAAgCS,YAAhC","sourcesContent":["const openBtn = document.getElementById('btn-prize-open');\r\nconst popup = document.querySelector('#prize-popup');\r\nconst closeBtn = document.querySelector('#prize-popup__close');\r\nconst nameField = document.querySelector('#prize-popup input[name=\"name\"]').parentNode;\r\nconst emailField = document.querySelector('#prize-popup input[name=\"email\"]').parentNode;\r\nconst selectPrize = document.getElementById('chooze-prize')\r\nconst form = document.getElementById('prize-form');\r\n\r\n\r\nfunction popupTooggle() {\r\n    popup.classList.toggle('hidden');\r\n}\r\n\r\nconst ERROR_CLASS_NAME = 'st-input1_error';\r\nconst FOCUCED_CLASS_NAME = 'st-input1_focused';\r\nconst SELECT_SELECTED = 'input-select-selected';\r\n\r\nfunction initalizeField(field) {\r\n    const input = field.getElementsByTagName('input')[0];\r\n    const fieldError = field.querySelector('.st-input1__error-msg');\r\n\r\n  reset();\r\n  \r\n\r\n    function clearError() {\r\n        field.classList.remove(FOCUCED_CLASS_NAME);\r\n        fieldError.innerText = '';\r\n    }\r\n\r\n\r\n    input.addEventListener('focus', function () {\r\n        field.classList.add(FOCUCED_CLASS_NAME);\r\n    })\r\n\r\n    input.addEventListener('blur', () => {\r\n        if (!input.value) {\r\n            field.classList.remove(FOCUCED_CLASS_NAME);\r\n        }\r\n    })\r\n    input.addEventListener('input', ()=> {\r\n        clearError();\r\n    })\r\n\r\n    function reset () {\r\n        input.value = '';\r\n        field.classList.remove(ERROR_CLASS_NAME);\r\n        clearError();\r\n    }\r\n\r\n    return {\r\n        addError(errorText) {\r\n            field.classList.add(ERROR_CLASS_NAME);\r\n            fieldError.innerText = errorText;\r\n        },\r\n        getValue() {\r\n            return input.value\r\n        },\r\n        focus() {\r\n            input.focus()\r\n        },\r\n        reset:reset\r\n\r\n    }\r\n}\r\n\r\n\r\n    initalizeField(nameField);\r\n    initalizeField(emailField);\r\n\r\n    openBtn.addEventListener('click', () => {\r\n        popupTooggle();\r\n        nameFieldUtils.focus();\r\n    });\r\n    selectPrize.addEventListener('change', () => {\r\n        selectPrize.classList.add('input-select-selected');\r\n    })\r\n    closeBtn.onclick = popupTooggle;\r\n\r\n    function handleSubmit(event) {\r\n        const nameValue = nameFieldUtils.getValue();\r\n        const emailValue = emailFieldutils.getValue();\r\n\r\n\r\n        if (!nameValue) {\r\n            nameFieldUtils.addError('Необходимо указать имя');\r\n            return;\r\n\r\n        }\r\n        if (!emailValue) {\r\n            emailFieldUtils.addError('Необходимо указать email');\r\n            return;\r\n\r\n        }\r\n        if (selectPrize.value === 'none') {\r\n            selectPrize.classList.add('ERROR_CLASS_NAME');\r\n            return;\r\n\r\n        }\r\n        event.preventDefault();\r\n\r\n\r\n        const data = {\r\n            name: nameValue,\r\n            email: emailValue,\r\n            prize: selectPrize.value\r\n        };\r\n\r\n        const url = new URL('http://inno-ijl.ru/multystub/stc-21-03/feedback');\r\n        url.search = new URLSearchParams(data).toString();\r\n\r\n        fetch(url.toString())\r\n        .then(data=> data.json())\r\n        .then((data)=> {\r\n            popupTooggle();\r\n            nameFieldUtils.reset();\r\n            emailFieldUtils.reset();\r\n        });\r\n\r\n    }\r\n\r\n    form.addEventListener('submit', handleSubmit);"],"file":"prize.js"}