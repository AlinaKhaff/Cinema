{"version":3,"sources":["../js/feedback.js"],"names":["name1Field","document","querySelector","parentNode","email1Field","selectPlace","getElementById","reviewField","form1","ERROR_CLASS_NAME1","FOCUCED_CLASS_NAME1","SELECT_SELECTED1","initalizeField","field","input1","getElementsByTagName","fieldError1","reset","value","classList","remove","innerText","clearError","addEventListener","add","addError","errorText","getValue","focus","name1FieldUtils","email1FieldUtils","reviewFieldUtils","handleSubmit","event","preventDefault","name1Value","email1Value","reviewValue","data","name","email","select","url","URL","search","URLSearchParams","toString","fetch","then","json","SELECT_SELECTED"],"mappings":"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","sourcesContent":["const name1Field = document.querySelector('#block08-form   input[name=\"name1\"]').parentNode;\r\nconst email1Field = document.querySelector('#block08-form   input[name=\"email1\"]').parentNode;\r\nconst selectPlace = document.getElementById('place-numbers')\r\nconst reviewField = document.querySelector('#block08-form   textArea[name=\"review\"]').parentNode;\r\nconst form1 = document.getElementById('feedback-form');\r\n\r\nconst ERROR_CLASS_NAME1 = 'st-input1_error';\r\nconst FOCUCED_CLASS_NAME1 = 'st-input1_focused';\r\nconst SELECT_SELECTED1 = 'input-select-selected';\r\n\r\nfunction initalizeField(field) {\r\n    const input1 = (field.getElementsByTagName('input')[0]) ? (field.getElementsByTagName('input')[0]) : (field.getElementsByTagName('textArea')[0])\r\n    const fieldError1= field.querySelector('.st-input1__error-msg');\r\n\r\n  reset();\r\n\r\n  input1.value = '';\r\n  field.classList.remove(ERROR_CLASS_NAME1);\r\n  field.classList.remove(FOCUCED_CLASS_NAME1);\r\n  fieldError1.innerText = '';\r\n\r\n  \r\n\r\n    function clearError() {\r\n        field.classList.remove(ERROR_CLASS_NAME1);\r\n        fieldError1.innerText = '';\r\n    }\r\n\r\n\r\n    input1.addEventListener('focus', function () {\r\n        field.classList.add(FOCUCED_CLASS_NAME1);\r\n    })\r\n\r\n    input1.addEventListener('blur', () => {\r\n        if (!input1.value) {\r\n            field.classList.remove(FOCUCED_CLASS_NAME1);\r\n        }\r\n    })\r\n    input1.addEventListener('input', ()=> {\r\n        clearError();\r\n    })\r\n\r\n    function reset () {\r\n        input1.value = '';\r\n        field.classList.remove(ERROR_CLASS_NAME1);\r\n        field.classList.remove(FOCUCED_CLASS_NAME1);\r\n        clearError();\r\n    }\r\n\r\n    return {\r\n        addError(errorText) {\r\n            field.classList.add(ERROR_CLASS_NAME1);\r\n            fieldError1.innerText = errorText;\r\n        },\r\n        getValue() {\r\n            return input1.value\r\n        },\r\n        focus() {\r\n            input1.focus()\r\n        },\r\n        reset:reset\r\n\r\n    }\r\n}\r\nconst name1FieldUtils = initalizeField(name1Field);\r\nconst email1FieldUtils = initalizeField(email1Field);\r\nconst reviewFieldUtils = initalizeField(reviewField);\r\n\r\n\r\n    selectPlace.addEventListener('change', () => {\r\n        selectPlace.classList.add('input-select-selected');\r\n    })\r\n\r\n\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n       \r\n        const name1Value = name1FieldUtils.getValue();\r\n        const email1Value = email1FieldUtils.getValue();\r\n        const reviewValue = reviewFieldUtils.getValue();\r\n        \r\n\r\n\r\n        if (!name1Value) {\r\n            name1FieldUtils.addError('Необходимо указать имя');\r\n            return;\r\n\r\n        }\r\n        if (!email1Value) {\r\n            email1FieldUtils.addError('Необходимо указать email');\r\n            return;\r\n\r\n        }\r\n    \r\n        if (selectPlace.value === 'none') {\r\n            selectPlace.classList.add(ERROR_CLASS_NAME1);\r\n            return;\r\n\r\n        }\r\n        if (!reviewValue) {\r\n            reviewFieldUtils.addError('Необходимо добавить отзыв');\r\n            return;\r\n        }\r\n\r\n\r\n        const data = {\r\n            name: name1Value,\r\n            email: email1Value,\r\n            select: selectPlace.value\r\n        };\r\n\r\n        const url = new URL('http://inno-ijl.ru/multystub/stc-21-03/feedback');\r\n        url.search = new URLSearchParams(data).toString();\r\n\r\n        fetch(url.toString())\r\n        .then(data=> data.json())\r\n        .then((data)=> {\r\n           \r\n            name1FieldUtils.reset();\r\n            email1FieldUtils.reset();\r\n            reviewFieldUtils.reset();\r\n            selectPlace.value = 'none';\r\n            selectPlace.classList.remove(SELECT_SELECTED);\r\n        });\r\n\r\n    }\r\n\r\n    form1.addEventListener('submit', handleSubmit);\r\n  "],"file":"feedback.js"}